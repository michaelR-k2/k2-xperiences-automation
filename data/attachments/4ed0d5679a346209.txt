# Instructions

- Following Playwright test failed.
- Explain why, be concise, respect Playwright best practices.
- Provide a snippet of code with the fix, if possible.

# Test info

- Name: @requests - Validar que la tabla de Solicitudes pueda ser filtrada por Paquetes/equipaje
- Location: /home/runner/work/k2-xperiences-automation/k2-xperiences-automation/e2e/tests/modules/requests/requests.spec.js:129:5

# Error details

```
Error: expect(received).toBeTruthy()

Received: false
    at RequestsPage.filterTableByColumnAndAssert (/home/runner/work/k2-xperiences-automation/k2-xperiences-automation/e2e/pages/BasePage.js:70:19)
    at /home/runner/work/k2-xperiences-automation/k2-xperiences-automation/e2e/tests/modules/requests/requests.spec.js:134:5
```

# Page snapshot

```yaml
- complementary:
  - img "Logo_K2_Travel"
  - button:
    - img
  - navigation:
    - link "Dashboard":
      - img
      - text: Dashboard
    - link "Requests":
      - img
      - text: Requests
    - link "Projects":
      - img
      - text: Projects
    - link "Catalogue":
      - img
      - text: Catalogue
    - link "Vendors":
      - img
      - text: Vendors
    - link "Trip Users":
      - img
      - text: Trip Users
    - link "File System":
      - img
      - text: File System
  - button:
    - img
- main:
  - heading "Requests (44)" [level=2]
  - button "Create request"
  - table:
    - rowgroup:
      - row "ID Creation at Pick a date Request channel Type Experience Departure Destination Packages 5 Length Meals Approach Budget Department Contact name Email Phone Status":
        - cell
        - cell "ID":
          - text: ID
          - button:
            - img
          - textbox
        - cell "Creation at Pick a date":
          - text: Creation at
          - button:
            - img
          - button "Pick a date":
            - text: Pick a date
            - img
        - cell "Request channel":
          - text: Request channel
          - button:
            - img
          - textbox
        - cell "Type":
          - text: Type
          - button:
            - img
          - textbox
        - cell "Experience":
          - text: Experience
          - button:
            - img
          - textbox
        - cell "Departure":
          - text: Departure
          - button:
            - img
          - textbox
        - cell "Destination":
          - text: Destination
          - button:
            - img
          - textbox
        - cell "Packages 5":
          - text: Packages
          - button:
            - img
          - textbox: "5"
        - cell "Length":
          - text: Length
          - button:
            - img
          - textbox
        - cell "Meals":
          - text: Meals
          - button:
            - img
          - textbox
        - cell "Approach":
          - text: Approach
          - button:
            - img
          - textbox
        - cell "Budget":
          - text: Budget
          - button:
            - img
          - textbox
        - cell "Department":
          - text: Department
          - button:
            - img
          - textbox
        - cell "Contact name":
          - text: Contact name
          - button:
            - img
          - textbox
        - cell "Email":
          - text: Email
          - button:
            - img
          - textbox
        - cell "Phone":
          - text: Phone
          - button:
            - img
          - textbox
        - cell "Status":
          - text: Status
          - button:
            - img
          - combobox: All
    - rowgroup:
      - row "Toggle menu 44 22/04/2025 Direct Client Customized Experience Barbados Colombia 4 2 nights Staycation All-inclusive Cultural $15000 - $20000 Marketing Michael Rodriguez it@k2con.com +573137906289 Received":
        - cell "Toggle menu":
          - button "Toggle menu":
            - img
            - text: Toggle menu
        - cell "44"
        - cell "22/04/2025"
        - cell "Direct"
        - cell "Client"
        - cell "Customized Experience"
        - cell "Barbados"
        - cell "Colombia"
        - cell "4"
        - cell "2 nights Staycation"
        - cell "All-inclusive"
        - cell "Cultural"
        - cell "$15000 - $20000"
        - cell "Marketing"
        - cell "Michael Rodriguez"
        - cell "it@k2con.com"
        - cell "+573137906289"
        - cell "Received"
      - row "Toggle menu 43 21/04/2025 Direct Xperiences Customized Experience Algeria 3 2 nights Staycation - - - Marketing Gustavo Ricci it@k2con.com +573137906289 Received":
        - cell "Toggle menu":
          - button "Toggle menu":
            - img
            - text: Toggle menu
        - cell "43"
        - cell "21/04/2025"
        - cell "Direct"
        - cell "Xperiences"
        - cell "Customized Experience"
        - cell
        - cell "Algeria"
        - cell "3"
        - cell "2 nights Staycation"
        - cell "-"
        - cell "-"
        - cell "-"
        - cell "Marketing"
        - cell "Gustavo Ricci"
        - cell "it@k2con.com"
        - cell "+573137906289"
        - cell "Received"
      - row "Toggle menu 42 17/04/2025 Platform Client Customized Experience Germany New Zealand 3 5 - 6 nights Breakfast Adventure > $20000 Marketing pablo arciniegas pablo@k2con.com +17542019819 Received":
        - cell "Toggle menu":
          - button "Toggle menu":
            - img
            - text: Toggle menu
        - cell "42"
        - cell "17/04/2025"
        - cell "Platform"
        - cell "Client"
        - cell "Customized Experience"
        - cell "Germany"
        - cell "New Zealand"
        - cell "3"
        - cell "5 - 6 nights"
        - cell "Breakfast"
        - cell "Adventure"
        - cell "> $20000"
        - cell "Marketing"
        - cell "pablo arciniegas"
        - cell "pablo@k2con.com"
        - cell "+17542019819"
        - cell "Received"
      - row "Toggle menu 41 24/03/2025 Platform Client Untamed Beauty – Mizata, El Salvador Ecuador, Aruba El Salvador 2 2 - 3 nights - - < $5000 Other Carlos Pinelly carlos@k2con.com +593999946458 Received":
        - cell "Toggle menu":
          - button "Toggle menu":
            - img
            - text: Toggle menu
        - cell "41"
        - cell "24/03/2025"
        - cell "Platform"
        - cell "Client"
        - cell "Untamed Beauty – Mizata, El Salvador"
        - cell "Ecuador, Aruba"
        - cell "El Salvador"
        - cell "2"
        - cell "2 - 3 nights"
        - cell "-"
        - cell "-"
        - cell "< $5000"
        - cell "Other"
        - cell "Carlos Pinelly"
        - cell "carlos@k2con.com"
        - cell "+593999946458"
        - cell "Received"
      - row "Toggle menu 40 24/03/2025 Platform Client Untamed Beauty – Mizata, El Salvador El Salvador 1 2 - 3 nights - - < $5000 Other Carlos Pinelly carlos@k2con.com +593999946458 Received":
        - cell "Toggle menu":
          - button "Toggle menu":
            - img
            - text: Toggle menu
        - cell "40"
        - cell "24/03/2025"
        - cell "Platform"
        - cell "Client"
        - cell "Untamed Beauty – Mizata, El Salvador"
        - cell
        - cell "El Salvador"
        - cell "1"
        - cell "2 - 3 nights"
        - cell "-"
        - cell "-"
        - cell "< $5000"
        - cell "Other"
        - cell "Carlos Pinelly"
        - cell "carlos@k2con.com"
        - cell "+593999946458"
        - cell "Received"
      - 'row "Toggle menu 39 20/03/2025 Platform Client Bogotá Unveiled: A 3-Day Journey Through Culture, Nature & Gastronomy Bogota, Colombia 1 2 nights Staycation - - < $5000 Other Lisseth Moreno lisseth@k2con.com +17546102357 Accepted"':
        - cell "Toggle menu":
          - button "Toggle menu":
            - img
            - text: Toggle menu
        - cell "39"
        - cell "20/03/2025"
        - cell "Platform"
        - cell "Client"
        - 'cell "Bogotá Unveiled: A 3-Day Journey Through Culture, Nature & Gastronomy"'
        - cell
        - cell "Bogota, Colombia"
        - cell "1"
        - cell "2 nights Staycation"
        - cell "-"
        - cell "-"
        - cell "< $5000"
        - cell "Other"
        - cell "Lisseth Moreno"
        - cell "lisseth@k2con.com"
        - cell "+17546102357"
        - cell "Accepted"
      - row "Toggle menu 38 12/03/2025 Direct Client Customized Experience Andorra Algeria 4 3 - 4 nights All-inclusive, Breakfast Cultural $5000 - $10000 Marketing Dunn and Clay LLC vaqyk@mailinator.com +12156056916 Accepted":
        - cell "Toggle menu":
          - button "Toggle menu":
            - img
            - text: Toggle menu
        - cell "38"
        - cell "12/03/2025"
        - cell "Direct"
        - cell "Client"
        - cell "Customized Experience"
        - cell "Andorra"
        - cell "Algeria"
        - cell "4"
        - cell "3 - 4 nights"
        - cell "All-inclusive, Breakfast"
        - cell "Cultural"
        - cell "$5000 - $10000"
        - cell "Marketing"
        - cell "Dunn and Clay LLC"
        - cell "vaqyk@mailinator.com"
        - cell "+12156056916"
        - cell "Accepted"
      - row "Toggle menu 37 09/03/2025 Platform Client Customized Experience Colombia Argentina, United States 1 3 - 4 nights All-inclusive Urban $10000 - $15000 Other Lisseth Moreno lisseth@k2con.com +17546102357 Received":
        - cell "Toggle menu":
          - button "Toggle menu":
            - img
            - text: Toggle menu
        - cell "37"
        - cell "09/03/2025"
        - cell "Platform"
        - cell "Client"
        - cell "Customized Experience"
        - cell "Colombia"
        - cell "Argentina, United States"
        - cell "1"
        - cell "3 - 4 nights"
        - cell "All-inclusive"
        - cell "Urban"
        - cell "$10000 - $15000"
        - cell "Other"
        - cell "Lisseth Moreno"
        - cell "lisseth@k2con.com"
        - cell "+17546102357"
        - cell "Received"
      - 'row "Toggle menu 36 09/03/2025 Platform Client Flavors of Mexico City: A Luxury Culinary Escape Mexico City, Mexico 1 2 nights Staycation - - $5000 - $10000 Other Lisseth Moreno lisseth@k2con.com +17546102357 Accepted"':
        - cell "Toggle menu":
          - button "Toggle menu":
            - img
            - text: Toggle menu
        - cell "36"
        - cell "09/03/2025"
        - cell "Platform"
        - cell "Client"
        - 'cell "Flavors of Mexico City: A Luxury Culinary Escape"'
        - cell
        - cell "Mexico City, Mexico"
        - cell "1"
        - cell "2 nights Staycation"
        - cell "-"
        - cell "-"
        - cell "$5000 - $10000"
        - cell "Other"
        - cell "Lisseth Moreno"
        - cell "lisseth@k2con.com"
        - cell "+17546102357"
        - cell "Accepted"
      - 'row "Toggle menu 35 03/03/2025 Platform Client Viva Las Vegas: A Sin City Spectacle for All Colombia Las Vegas, United States 1 3 - 4 nights - - $10000 - $15000 Other Lisseth Moreno lisseth@k2con.com +17546102357 Accepted"':
        - cell "Toggle menu":
          - button "Toggle menu":
            - img
            - text: Toggle menu
        - cell "35"
        - cell "03/03/2025"
        - cell "Platform"
        - cell "Client"
        - 'cell "Viva Las Vegas: A Sin City Spectacle for All"'
        - cell "Colombia"
        - cell "Las Vegas, United States"
        - cell "1"
        - cell "3 - 4 nights"
        - cell "-"
        - cell "-"
        - cell "$10000 - $15000"
        - cell "Other"
        - cell "Lisseth Moreno"
        - cell "lisseth@k2con.com"
        - cell "+17546102357"
        - cell "Accepted"
      - row "Toggle menu 34 07/02/2025 Platform Client Mystical Mayan Escape – Flores, Guatemala Botswana Flores, Guatemala 1 2 nights Staycation All-inclusive Adventure, Beach < $5000 Marketing Andres Villarreta Andres.villarreta@k2con.com +584121757642 Accepted":
        - cell "Toggle menu":
          - button "Toggle menu":
            - img
            - text: Toggle menu
        - cell "34"
        - cell "07/02/2025"
        - cell "Platform"
        - cell "Client"
        - cell "Mystical Mayan Escape – Flores, Guatemala"
        - cell "Botswana"
        - cell "Flores, Guatemala"
        - cell "1"
        - cell "2 nights Staycation"
        - cell "All-inclusive"
        - cell "Adventure, Beach"
        - cell "< $5000"
        - cell "Marketing"
        - cell "Andres Villarreta"
        - cell "Andres.villarreta@k2con.com"
        - cell "+584121757642"
        - cell "Accepted"
      - row "Toggle menu 33 07/02/2025 Platform Client Mystical Mayan Escape – Flores, Guatemala Brazil Flores, Guatemala 1 - Breakfast Cultural < $5000 Advisors Mariana Araujo mariana@k2con.com +573163926785 Accepted":
        - cell "Toggle menu":
          - button "Toggle menu":
            - img
            - text: Toggle menu
        - cell "33"
        - cell "07/02/2025"
        - cell "Platform"
        - cell "Client"
        - cell "Mystical Mayan Escape – Flores, Guatemala"
        - cell "Brazil"
        - cell "Flores, Guatemala"
        - cell "1"
        - cell "-"
        - cell "Breakfast"
        - cell "Cultural"
        - cell "< $5000"
        - cell "Advisors"
        - cell "Mariana Araujo"
        - cell "mariana@k2con.com"
        - cell "+573163926785"
        - cell "Accepted"
      - row "Toggle menu 32 07/02/2025 Platform Client Mystical Mayan Escape – Flores, Guatemala Guatemala Flores, Guatemala 1 2 - 3 nights - - < $5000 Advisors Mariana Araujo mariana@k2con.com +573163926785 Received":
        - cell "Toggle menu":
          - button "Toggle menu":
            - img
            - text: Toggle menu
        - cell "32"
        - cell "07/02/2025"
        - cell "Platform"
        - cell "Client"
        - cell "Mystical Mayan Escape – Flores, Guatemala"
        - cell "Guatemala"
        - cell "Flores, Guatemala"
        - cell "1"
        - cell "2 - 3 nights"
        - cell "-"
        - cell "-"
        - cell "< $5000"
        - cell "Advisors"
        - cell "Mariana Araujo"
        - cell "mariana@k2con.com"
        - cell "+573163926785"
        - cell "Received"
      - row "Toggle menu 31 07/02/2025 Platform Client Customized Experience Colombia Mexico 2 3 - 4 nights Breakfast, All-inclusive Cultural, Beach $5000 - $10000 Advisors cesar cuellar cesar@k2con.com +573163926785 Accepted":
        - cell "Toggle menu":
          - button "Toggle menu":
            - img
            - text: Toggle menu
        - cell "31"
        - cell "07/02/2025"
        - cell "Platform"
        - cell "Client"
        - cell "Customized Experience"
        - cell "Colombia"
        - cell "Mexico"
        - cell "2"
        - cell "3 - 4 nights"
        - cell "Breakfast, All-inclusive"
        - cell "Cultural, Beach"
        - cell "$5000 - $10000"
        - cell "Advisors"
        - cell "cesar cuellar"
        - cell "cesar@k2con.com"
        - cell "+573163926785"
        - cell "Accepted"
      - row "Toggle menu 30 06/02/2025 Platform Client Untamed Beauty – Mizata, El Salvador Spain El Salvador 1 2 nights Staycation - - < $5000 Marketing Gustavo Ricci it@k2con.com +34614292604 Received":
        - cell "Toggle menu":
          - button "Toggle menu":
            - img
            - text: Toggle menu
        - cell "30"
        - cell "06/02/2025"
        - cell "Platform"
        - cell "Client"
        - cell "Untamed Beauty – Mizata, El Salvador"
        - cell "Spain"
        - cell "El Salvador"
        - cell "1"
        - cell "2 nights Staycation"
        - cell "-"
        - cell "-"
        - cell "< $5000"
        - cell "Marketing"
        - cell "Gustavo Ricci"
        - cell "it@k2con.com"
        - cell "+34614292604"
        - cell "Received"
  - paragraph: Rows per page
  - combobox: "15"
  - text: Page 1 of 3
  - button "Go to first page" [disabled]:
    - text: Go to first page
    - img
  - button "Go to previous page" [disabled]:
    - text: Go to previous page
    - img
  - button "Go to next page":
    - text: Go to next page
    - img
  - button "Go to last page":
    - text: Go to last page
    - img
- region "Notifications alt+T"
```

# Test source

```ts
   1 | import { expect } from '@playwright/test';
   2 |
   3 | export default class BasePage {
   4 |   constructor(page) {
   5 |     this.page = page;
   6 |     this.dashboardLink = page.locator('nav a[href*="/dashboard"]');
   7 |     this.requestsLink = page.locator('nav a[href*="/requests"]');
   8 |     this.projectsLink = page.locator('nav a[href*="/projects"]');
   9 |     this.experiencesLink = page.locator('nav a[href*="/experiences"]');
  10 |     this.vendorsLink = page.locator('nav a[href*="/vendors"]');
  11 |     this.tripUsersLink = page.locator('nav a[href*="/trip-users"]');
  12 |     this.filesLink = page.locator('nav a[href*="/files"]');
  13 |     this.tableHeaders = page.locator("table thead tr th div span");
  14 |     this.table = page.locator("table tbody");
  15 |     this.alltableItems = this.table.locator("tr");
  16 |   }
  17 |
  18 |   async getCurrentUrl() {
  19 |     return this.page.url();
  20 |   }
  21 |
  22 |   async getTableHeaders() {
  23 |     await this.tableHeaders.first().waitFor({ state: "visible" });
  24 |     return await this.tableHeaders.allTextContents();
  25 |   }
  26 |
  27 |   async getTableRowsCount() {
  28 |     await this.page.waitForSelector("table tbody tr", {state: "attached"});
  29 |     return await this.alltableItems.count(); 
  30 |   }
  31 |
  32 |   async filterByDateAndAssert(columnIndex, dateString) {
  33 |     const [day, month, year] = dateString.split('/').map(Number);
  34 |     const columnSelector = `thead tr th:nth-child(${columnIndex + 1})`;
  35 |     await this.page.locator(`${columnSelector} button[aria-haspopup="dialog"]`).click();
  36 |     const getCurrentMonthYear = async () => {
  37 |       const header = await this.page.locator('[role="dialog"] >> text=/^[A-Z][a-z]+ \\d{4}$/').textContent();
  38 |       const [currentMonthName, currentYear] = header.split(' ');
  39 |       const currentMonth = new Date(`${currentMonthName} 1, 2000`).getMonth() + 1;
  40 |       return { currentMonth, currentYear: parseInt(currentYear) };
  41 |     };
  42 |     while (true) {
  43 |       const { currentMonth, currentYear } = await getCurrentMonthYear();
  44 |       if (currentMonth === month && currentYear === year) break;
  45 |   
  46 |       if (currentYear > year || (currentYear === year && currentMonth > month)) {
  47 |         await this.page.locator('button[aria-label="Go to the Previous Month"]').click();
  48 |       } else {
  49 |         await this.page.locator('button[aria-label="Go to the Next Month"]').click();
  50 |       }
  51 |   
  52 |       await this.page.waitForTimeout(1000);
  53 |     }
  54 |     await this.page.locator(`button:has-text("${day}")`).first().click();
  55 |     await this.page.waitForTimeout(1000);
  56 |     await this.page.locator('body').click();
  57 |     const matchingCells = await this.page.locator(`tbody tr td:nth-child(${columnIndex + 1})`).allInnerTexts();
  58 |     
  59 |     const found = matchingCells.some(text => text.trim() === dateString);
  60 |     expect(found).toBeTruthy();
  61 |   };
  62 |
  63 |   async filterTableByColumnAndAssert(columnIndex, valueToFilter) {
  64 |     const filterInput = this.page.locator(`thead tr th:nth-child(${columnIndex + 1}) input`);
  65 |     await filterInput.fill(valueToFilter);
  66 |     await this.page.waitForTimeout(2500); 
  67 |     const matchingCells = await this.page.locator(`tbody tr td:nth-child(${columnIndex + 1})`).allInnerTexts();
  68 |
  69 |     const found = matchingCells.some(text => text.trim().includes(valueToFilter));
> 70 |     expect(found).toBeTruthy();
     |                   ^ Error: expect(received).toBeTruthy()
  71 |   }
  72 |
  73 |   async filterTableByStatusAndAssert(columnIndex, valueToFilter) {
  74 |     const filterInput = this.page.locator(`thead tr th:nth-child(${columnIndex + 1}) button[role="combobox"]`);
  75 |     await filterInput.click();
  76 |     const regex = new RegExp(`^${valueToFilter.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')}$`);
  77 |     await this.page.locator('div[data-radix-popper-content-wrapper]').getByText(regex).click();
  78 |     await this.page.waitForTimeout(1000); 
  79 |     const matchingCells = await this.page.locator(`tbody tr td:nth-child(${columnIndex + 1})`).allInnerTexts();
  80 |
  81 |     const found = matchingCells.some(text => text.trim().includes(valueToFilter));
  82 |     expect(found).toBeTruthy();
  83 |   }
  84 |
  85 |   delay = (milliseconds) => new Promise((resolve) => setTimeout(resolve, milliseconds));
  86 | }
  87 |
```